"""
Stock Market Analysis & Prediction System - Configuration
ì£¼ì‹ ì‹œì¥ ë¶„ì„ ë° ì˜ˆì¸¡ ì‹œìŠ¤í…œ ì„¤ì • íŒŒì¼
"""
import os
from pathlib import Path

# =============================================================================
# í”„ë¡œì íŠ¸ ê²½ë¡œ ì„¤ì •
# =============================================================================
BASE_DIR = Path(__file__).parent.absolute()
DATA_DIR = BASE_DIR / "data"
PROCESSED_DIR = BASE_DIR / "processed"
MODELS_DIR = BASE_DIR / "src" / "models" / "saved_models"  # ì €ì¥ëœ ëª¨ë¸ ë””ë ‰í† ë¦¬

# =============================================================================
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
# =============================================================================
DATABASE_PATH = DATA_DIR / "stock_data.db"

# =============================================================================
# ì£¼ì‹ ë°ì´í„° ì„¤ì •
# =============================================================================
# ê¸°ë³¸ ë¶„ì„ ëŒ€ìƒ ì¢…ëª©
DEFAULT_TICKERS = {
    "ì‚¼ì„±ì „ì": "005930.KS",
    "SKí•˜ì´ë‹‰ìŠ¤": "000660.KS",
    "NAVER": "035420.KS",
    "ì¹´ì¹´ì˜¤": "035720.KS",
    "í˜„ëŒ€ì°¨": "005380.KS",
}

# í•´ì™¸ ì£¼ìš” ì¢…ëª©
US_TICKERS = {
    "Apple": "AAPL",
    "Microsoft": "MSFT",
    "Google": "GOOGL",
    "Amazon": "AMZN",
    "Tesla": "TSLA",
}

# =============================================================================
# ì‹œì¥ë³„ ì„¤ì • (í†µí•© ê´€ë¦¬)
# =============================================================================
MARKET_CONFIG = {
    "KR": {
        "name": "í•œêµ­ (KRX)",
        "suffix": ".KS",  # KOSPI (KOSDAQì€ .KQ)
        "currency": "KRW",
        "currency_symbol": "â‚©",
        "realtime_api": "KIS",  # í•œêµ­íˆ¬ìì¦ê¶Œ
        "news_sources": ["naver", "google_kr"],
        "sentiment_model": "kr_finbert",  # í•œê¸€ ë”¥ëŸ¬ë‹ ëª¨ë¸
    },
    "US": {
        "name": "ë¯¸êµ­ (NYSE/NASDAQ)",
        "suffix": "",  # ì ‘ë¯¸ì‚¬ ì—†ìŒ
        "currency": "USD",
        "currency_symbol": "$",
        "realtime_api": None,  # ì‹¤ì‹œê°„ ë¯¸ì§€ì›
        "news_sources": ["yahoo", "google_en"],
        "sentiment_model": "vader",  # ì˜ë¬¸ VADER
    }
}

# í™˜ìœ¨ ì„¤ì •
EXCHANGE_RATE_CONFIG = {
    "source": "yfinance",  # yfinance ë˜ëŠ” í•œêµ­ì€í–‰ API
    "pair": "USDKRW=X",  # yfinance í™˜ìœ¨ ì‹¬ë³¼
    "cache_ttl": 3600,  # 1ì‹œê°„ ìºì‹±
}

# ë°ì´í„° ìˆ˜ì§‘ ê¸°ê°„ (ê¸°ë³¸ê°’)
DEFAULT_PERIOD = "2y"  # 2ë…„
DEFAULT_INTERVAL = "1d"  # ì¼ë´‰

# =============================================================================
# ê¸°ìˆ ì  ì§€í‘œ ì„¤ì •
# =============================================================================
INDICATOR_PARAMS = {
    "RSI": {"period": 14},
    "MACD": {"fast": 12, "slow": 26, "signal": 9},
    "SMA": {"periods": [5, 20, 60, 120]},
    "EMA": {"periods": [5, 20, 60]},
    "BOLLINGER": {"period": 20, "std": 2},
}

# =============================================================================
# AI ëª¨ë¸ ì„¤ì •
# =============================================================================
MODEL_CONFIG = {
    "LSTM": {
        "sequence_length": 60,  # 60ì¼ ì‹œí€€ìŠ¤
        "units": [128, 64, 32],
        "dropout": 0.2,
        "epochs": 100,
        "batch_size": 32,
    },
    "XGBOOST": {
        "n_estimators": 100,
        "max_depth": 6,
        "learning_rate": 0.1,
        "objective": "binary:logistic",  # ë“±ë½ ì˜ˆì¸¡
    },
}

# =============================================================================
# ì•™ìƒë¸” ëª¨ë¸ ì„¤ì • (Phase 2)
# =============================================================================
ENSEMBLE_CONFIG = {
    # ì•™ìƒë¸” ì „ëµ: 'weighted_average', 'voting', 'stacking'
    "strategy": "weighted_average",

    # ëª¨ë¸ë³„ ê°€ì¤‘ì¹˜ (í•©ì´ 1ì´ ë˜ë„ë¡ ì„¤ì •)
    "weights": {
        "lstm": 0.5,          # LSTM íšŒê·€ ëª¨ë¸
        "xgboost": 0.3,       # XGBoost ë¶„ë¥˜ ëª¨ë¸
        "rule_based": 0.2,    # ê·œì¹™ ê¸°ë°˜ ì‹œê·¸ë„
    },

    # ìŠ¤íƒœí‚¹ ì „ëµìš© ë©”íƒ€ ëª¨ë¸ ì„¤ì •
    "meta_window_size": 100,  # ë©”íƒ€ ëª¨ë¸ í•™ìŠµìš© ìœˆë„ìš° í¬ê¸°

    # ì‹ ë¢°ë„ ì„ê³„ê°’
    "confidence_threshold": {
        "high": 0.75,   # ë†’ì€ ì‹ ë¢°ë„
        "medium": 0.60,  # ì¤‘ê°„ ì‹ ë¢°ë„
        "low": 0.45,    # ë‚®ì€ ì‹ ë¢°ë„
    },

    # ì•™ìƒë¸” ì˜ˆì¸¡ ì˜µì…˜
    "options": {
        "include_rule_based": True,  # ê·œì¹™ ê¸°ë°˜ ì‹œê·¸ë„ í¬í•¨ ì—¬ë¶€
        "min_models": 2,             # ìµœì†Œ í•„ìš” ëª¨ë¸ ìˆ˜
        "normalize_weights": True,   # ê°€ì¤‘ì¹˜ ìë™ ì •ê·œí™”
    },

    # ë ˆê±°ì‹œ ì„¤ì • (í˜¸í™˜ì„± ìœ ì§€)
    "voting_threshold": 0.6,  # 60% ì´ìƒ ë™ì˜ ì‹œ ì‹œê·¸ë„ ë°œìƒ
    "confidence_min": 0.5,    # ìµœì†Œ ì‹ ë¢°ë„
}

# =============================================================================
# ë‰´ìŠ¤ í¬ë¡¤ë§ ì„¤ì • (Phase 2)
# =============================================================================
NEWS_CONFIG = {
    "sources": {
        "naver_finance": "https://finance.naver.com/news/news_search.naver",
        "google_news_rss": "https://news.google.com/rss/search",
    },
    "max_articles": 50,
    "crawl_delay": 1.0,  # ì´ˆ ë‹¨ìœ„
    "sentiment_keywords": {
        "positive": ["ìƒìŠ¹", "ê¸‰ë“±", "í˜¸ì¬", "ìµœê³ ", "ì„±ì¥", "ì¦ê°€", "ê°œì„ ", "ê¸ì •"],
        "negative": ["í•˜ë½", "ê¸‰ë½", "ì•…ì¬", "ìµœì €", "ê°ì†Œ", "í•˜í–¥", "ë¶€ì •", "ìš°ë ¤"],
    },
}

# =============================================================================
# ë°±í…ŒìŠ¤íŒ… ì„¤ì • (Phase 2)
# =============================================================================
BACKTEST_CONFIG = {
    "initial_capital": 10_000_000,  # ì´ˆê¸° ìë³¸ê¸ˆ 1ì²œë§Œì›
    "commission": 0.00015,           # ê±°ë˜ ìˆ˜ìˆ˜ë£Œ 0.015%
    "slippage": 0.001,              # ìŠ¬ë¦¬í”¼ì§€ 0.1%
    "position_size": 0.2,            # í¬ì§€ì…˜ í¬ê¸° (ìë³¸ê¸ˆì˜ 20%)
    "strategies": {
        "rsi": {"oversold": 30, "overbought": 70},
        "macd": {"use_histogram": True},
        "ma_cross": {"fast": 20, "slow": 60},
    },
}

# =============================================================================
# ë‹¤ì¤‘ ì¢…ëª© ë¶„ì„ ì„¤ì • (Phase 2)
# =============================================================================
MULTI_STOCK_CONFIG = {
    "max_workers": 5,  # ë³‘ë ¬ ì²˜ë¦¬ ì›Œì»¤ ìˆ˜
    "timeout": 30,     # ê° ì¢…ëª©ë‹¹ íƒ€ì„ì•„ì›ƒ (ì´ˆ)
    "cache_enabled": True,
}

# =============================================================================
# ëŒ€ì‹œë³´ë“œ ì„¤ì •
# =============================================================================
DASHBOARD_CONFIG = {
    "page_title": "ğŸ“ˆ ì£¼ì‹ ë¶„ì„ ëŒ€ì‹œë³´ë“œ",
    "page_icon": "ğŸ“Š",
    "layout": "wide",
    "theme": "dark",
}

# =============================================================================
# ë””ë ‰í† ë¦¬ ìë™ ìƒì„±
# =============================================================================
BACKTEST_DIR = BASE_DIR / "backtest_results"
for dir_path in [DATA_DIR, PROCESSED_DIR, MODELS_DIR, BACKTEST_DIR]:
    dir_path.mkdir(parents=True, exist_ok=True)
